<!-- Updated version with cart badge and toast -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All Product</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="font-sans bg-gray-50 text-gray-800" x-data="cartHandler()">

<!-- HEADER -->
<header class="flex items-center justify-between px-4 py-1 bg-white border-b shadow-sm">
  <div class="flex items-center space-x-3">
    <a href="/home">
      <button><img src="assets/icons/home.svg" class="w-5 h-5" alt="home icon" /></button>
    </a>
    <div class="relative">
      <span class="absolute inset-y-0 left-2 flex items-center text-gray-400">
        <img src="assets/icons/iconSearch.png" class="w-5 h-5" alt="Search icon" />
      </span>
      <input type="text" placeholder="Search Chair, Table, Etc..."
        class="w-72 pl-8 pr-4 py-1.5 rounded-md border border-gray-300 text-sm focus:outline-none focus:ring-1 focus:ring-blue-400" />
    </div>
  </div>
  <div class="flex items-center space-x-4 relative">
    <button><img src="assets/icons/notification.svg" class="w-5 h-5" alt="notif icon" /></button>
    <button @click="cartOpen = !cartOpen" class="relative">
      <img src="assets/icons/shopping-cart.svg" class="w-5 h-5" alt="cart icon" />
      <span x-show="cart.length > 0" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full px-1" x-text="cart.length"></span>
    </button>
  </div>
</header>

<!-- TOAST -->
<div x-show="showToast" x-transition class="fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded shadow z-50" x-text="toastMessage"></div>

<!-- PRODUCT GRID -->
<main class="w-full px-4 py-3">
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
    <!-- Example Item -->
    <div class="rounded-2xl bg-white shadow p-4 flex flex-col gap-2 relative">
      <div class="absolute top-2 left-2 flex gap-2">
        <span class="bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded">-30%</span>
        <span class="bg-pink-500 text-white text-xs px-2 py-0.5 rounded">New</span>
      </div>
      <img src="assets/img/office-chair.jpg" class="h-32 object-contain mx-auto" />
      <h3 class="font-bold text-center text-base">Office Chair</h3>
      <div class="flex items-center justify-between w-full text-sm">
        <div class="text-lg font-bold text-gray-900">
          $30 <span class="line-through text-red-500 ml-1 text-sm">$50</span>
        </div>
        <div class="flex gap-2 text-gray-600">
          <span>W: 120</span><span>D: 40</span><span>H: 110</span>
        </div>
      </div>
      <div class="flex items-center justify-between mt-2">
        <span class="text-green-700 text-sm bg-green-100 px-2 py-0.5 rounded flex items-center gap-1">
          <img src="assets/icons/tick-circle.png" class="w-5 h-5" alt="tick-circle" /> In Stock
        </span>
        <button class="bg-gray-800 text-white text-sm px-3 py-1 rounded flex items-center gap-1"
          @click="addToCart({ id: 1, name: 'Office Chair', price: 30 })">
          <img src="assets/icons/cart-shopping-white.png" class="w-5 h-5" alt="cart icon" />
          Add to Cart
        </button>
      </div>
    </div>
  </div>
</main>

<!-- SIDEBAR OVERLAY -->
<div x-show="cartOpen" class="fixed inset-0 bg-black/50 z-40" @click="cartOpen = false"></div>

<!-- SIDEBAR -->
<aside x-show="cartOpen" x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="translate-x-full" x-transition:enter-end="translate-x-0"
  x-transition:leave="transition ease-in duration-300" x-transition:leave-start="translate-x-0"
  x-transition:leave-end="translate-x-full"
  class="fixed top-0 right-0 w-96 h-full bg-white shadow-lg z-50 overflow-y-auto">

  <div class="p-6">
    <div class="flex justify-between items-center">
      <h2 class="text-xl font-semibold">Order Details</h2>
      <button class="text-yellow-500 text-sm" @click="cart = []">Clear Cart</button>
    </div>
    <div class="mt-4 space-y-4">
      <template x-for="item in cart" :key="item.id">
        <div class="flex items-center justify-between border-b pb-2">
          <div class="flex items-center gap-2 w-1/3">
            <img src="assets/img/office-chair.jpg" class="w-10 h-10 object-contain" />
            <span class="text-sm" x-text="item.name"></span>
          </div>
          <div class="flex items-center gap-2 w-1/3">
            <button class="px-2" @click="item.qty = Math.max(1, item.qty - 1)">-</button>
            <span x-text="item.qty"></span>
            <button class="px-2" @click="item.qty++">+</button>
          </div>
          <div class="flex items-center gap-2 w-1/3 justify-end">
            <span class="w-12 text-right text-sm" x-text="'$' + (item.price * item.qty)"></span>
            <button class="text-red-500" @click="removeFromCart(item.id)">ðŸ—‘</button>
          </div>
        </div>
      </template>
    </div>

    <!-- SUMMARY -->
    <div class="mt-6 text-sm">
      <div class="flex justify-between"><span>Sub Total :</span><span x-text="'$' + totalPrice"></span></div>
      <div class="flex justify-between"><span>Product Discount :</span><span>$0</span></div>
      <div class="flex justify-between font-bold text-lg mt-2">
        <span>Total :</span><span x-text="'$' + totalPrice"></span>
      </div>
    </div>

    <!-- PAYMENT METHOD -->
    <div class="mt-6">
      <h3 class="text-sm font-semibold mb-2">Payment Method</h3>
      <div class="flex gap-4">
        <button class="flex-1 p-2 border rounded text-sm">Cash</button>
        <button class="flex-1 p-2 border rounded text-sm">Cart</button>
        <button class="flex-1 p-2 border rounded text-sm">E-Wallet</button>
      </div>
      <button class="mt-6 w-full bg-yellow-600 text-white py-2 rounded text-sm">Order Now</button>
    </div>
  </div>
</aside>

<script>
  function cartHandler() {
    return {
      cartOpen: false,
      cart: [],
      showToast: false,
      toastMessage: '',
      addToCart(product) {
        const existing = this.cart.find(item => item.id === product.id);
        if (existing) {
          existing.qty++;
        } else {
          this.cart.push({ ...product, qty: 1 });
        }
        this.toastMessage = `${product.name} added to cart`;
        this.showToast = true;
        setTimeout(() => this.showToast = false, 2000);
      },
      removeFromCart(id) {
        this.cart = this.cart.filter(item => item.id !== id);
      },
      get totalPrice() {
        return this.cart.reduce((total, item) => total + item.price * item.qty, 0);
      }
    }
  }
</script>

</body>
</html>
